# Отчет по тестовому заданию


### Минимальный уровень
  1. Запустить проект и ознакомиться с его документацией на странице `http://127.0.0.1:8000/redoc/`
     или `http://127.0.0.1:8000/docs/` 
     и выполнить каждый из запросов
  2. Изменения кода и их описания можно посмотреть в коммитах [cccb1a9](https://github.com/TheRealMizAL/Python-test/commit/cccb1a9d1fc31d12517261bfa78b7cf3d8590b6e) и [d959b22](https://github.com/TheRealMizAL/Python-test/commit/d959b22431c69df5134bf4ba5c3e5563322faae8)
  3. Возможные идеи для рефакторинга _external_requests.py_: 
     - удалить API ключ из кода и заменить ее на переменную среды;
     - создать общий класс для обращения к методам OpenWeatherMap (например, WheatherAPI). Из минусов будет потенциальная необходимость делать адаптер для старого интерфейса;
     - изменить метод для генерации URL. Стоит, как минимум, разделить базовый путь и методы, что, в дальнейшем, позволит просто расширить функционал существующей обертки. Помимо этого, параметры запроса можно передавать в качестве именнованных аргументов и отправлять запрос с помощью requests;
     - привести методы обращения к OpenWeatherMap API к общему виду;
     - исправить ошибки кодстайла (количество пустых строк в некоторых местах не соответствует PEP8, наличие скобок у классов при отсутствии родительских классов и т.д.)
  4. Возможные проблемы при масштабировании проекта:
     - отсутвие нормальной архитектуры превращает файл main.py в неструктуризированную "свалку" методов, в которой достаточно сложно разобраться;
     - так же отсутствие архитектуры ведет к отсутствию роутинга, что усложняет, как минимум, инъекцию зависимостей;
     - нет стандартной структуры ошибок, из-за чего на клиенте будет практически невозможно понять, какую ошибку вернул метод (можно сравнивать текст ошибки, но это плохой вариант);
     - описание логики API метода в самом методе не позволит использовать этот код повторно;
     - при обновлении моделей объектов в датабазе, придется вносить много изменений в код. Помимо внесений изменений в _database.py_, придется править файлы _main.py_ и, потенциально, _models.py_ с _tests.py_


     
### Продвинутый уровень
  1. Привести к нормальному виду:
     - Методы обращения к эндпойнтам
     - Названия эндпойнтов
     - Архитектуру и пути обращения к эндпойнтам
  2. Расписать все входные/выходные поля в документации (`/redoc/` или `/docs/`), описав их классами
  3. Результат оптимизации можно посмотреть в коммите [35c130c](https://github.com/TheRealMizAL/Python-test/commit/35c130cf96e07a5e3bb60e1a29b93dcbf2113005)
  4. Результат изменения можно посмотреть в коммите [4743c08](https://github.com/TheRealMizAL/Python-test/commit/4743c08b12542b7e15a8701a9af36c66af380030)
  5. Результат рефакторинга можно посмотреть в коммите [eed40f6](https://github.com/TheRealMizAL/Python-test/commit/eed40f682878463cd319037429e94bb0749ca46c)
  6. Написать тесты


### Дополнительные задания
  - Сделать логирование в файл, который не будет очищаться после перезапуска в докере
  - Описать правильную архитектуру для проекта


## Результат выполнения задания
Результат выполнения должен быть выложен в _общедоступном_ репозитории,
 история коммитов должна показывать выполненную работу
_Комментарии в коде тоже приветствуются_